# StateMachine 2.3.2

*Not released yet*

## What's new in 2.3.2

Observers are now rebranded to {ref}`listeners`. With expanted support for adding listeners when
instantiating a state machine. This allows covering more use cases.

### Listeners at class initialization

Listeners are a way to generically add behavior to a state machine without changing its internal implementation.

Example:

```py
>>> from tests.examples.traffic_light_machine import TrafficLightMachine

>>> class LogListener(object):
...     def __init__(self, name):
...         self.name = name
...
...     def after_transition(self, event, source, target):
...         print(f"{self.name} after: {source.id}--({event})-->{target.id}")
...
...     def on_enter_state(self, target, event):
...         print(f"{self.name} enter: {target.id} from {event}")


>>> sm = TrafficLightMachine(listeners=[LogListener("Paulista Avenue")])
Paulista Avenue enter: green from __initial__

>>> sm.cycle()
Paulista Avenue enter: yellow from cycle
Paulista Avenue after: green--(cycle)-->yellow
'Running cycle from green to yellow'

```

```{seealso}
See {ref}`listeners` for more details.
```

## Bugfixes in 2.3.2

-

## Deprecation notes

### Statemachine class

- `StateMachine.add_observer` is deprecated in favor of `StateMachine.add_listener`.
