<?xml version="1.0" encoding="UTF-8"?>
<scxml datamodel="ecmascript" initial="s0" name="ScxmlTest190" version="1.0"
	xmlns="http://www.w3.org/2005/07/scxml" xmlns:conf="http://www.w3.org/2005/scxml-conformance"><!--we
	test that #_scxml_sessionid as a target of <send> puts the event on the external queue.  If it
	does,
event1 will be processed before event2, because event1 is added to the internal queue while event2
	is
added to the external queue (event though event2 is generated first).  we have to make sure that
	event2
is actually delivered.  The delayed <send> makes sure another event is generated (so the test
	doesn't hang)-->
	<datamodel>
		<data expr="'#_scxml_'" id="Var1" />
		<data expr="_sessionid" id="Var2" />
	</datamodel>
	<state id="s0"><!--once
		we've entered the state, we should check for internal events first-->
		<onentry>
			<assign expr="Var1 + Var2" location="Var1" /><!--goes
			to the external queue-->
			<send event="event2" targetexpr="Var1" /><!--to
			the internal queue-->
			<raise event="event1" /><!--this
			should get added to the external queue after event2-->
			<send event="timeout" />
		</onentry>
		<transition event="event1" target="s1" />
		<transition event="*" target="fail" />
	</state>
	<state id="s1"><!--now
		check that we get event2 and not a timeout-->
		<transition event="event2" target="pass" />
		<transition event="*" target="fail" />
	</state>
	<final id="pass">
		<onentry>
			<log expr="'pass'" label="Outcome" />
		</onentry>
	</final>
	<final id="fail">
		<onentry>
			<log expr="'fail'" label="Outcome" />
		</onentry>
	</final>
</scxml>
